<section class="loading" *ngIf="loading">
  <mat-spinner diameter="64"></mat-spinner>
</section>

<section class="content" *ngIf="!loading && !!analysis">
  <form class="target-form" [formGroup]="form">
    <mat-form-field class="fill" appearance="standard">
      <mat-label>Filter by Target</mat-label>
      <mat-select formControlName="target" (selectionChange)="onTargetChange($event)">
        <mat-option [value]="0">All Targets</mat-option>
        <mat-option *ngFor="let option of targets" [value]="option.id">
          {{option.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </form>

  <mat-tab-group [selectedIndex]="activeTab" (selectedTabChange)="onTabChange($event)">
    <mat-tab *ngFor="let tab of tabs">
      <ng-template mat-tab-label>
        <span class="icon spell-{{ tab.icon }}" *ngIf="tab.icon"></span>
        <span [ngClass]="{ 'label': tab.icon }">{{ tab.label }}</span>
      </ng-template>
      <summary [fields]="tab.fields"></summary>
      <casts
        [analysis]="analysis"
        [spellId]="tab.spellId"
        [casts]="tab.casts"
        [highlight]="highlight">
      </casts>
    </mat-tab>
  </mat-tab-group>
</section>
